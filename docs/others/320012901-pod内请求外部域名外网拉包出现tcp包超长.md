---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# pod内请求外部域名外网拉包出现tcp包超长

容器内 curl 请求部分失败，错误码 60（SSL 证书验证失败） 宿主机或本地执行相同 curl 请求正常 抓包显示失败请求的服务器返回证书链不完整（缺少中间证书或根证书）

## Cause
- 外部 CDN 节点（如 nuget.cdn.azure.cn）证书链不完整
- CDN 边缘节点配置不一致，部分节点返回的证书链缺失中间证书或根证书

## Resolution
- 业务镜像中手动添加相关中间证书和根证书（如通过 Dockerfile 的 COPY 指令）
- 使用 tcpdump 抓包分析并提交结果给 CDN 提供方（命令示例：tcpdump -i <网络接口> host <外部域名> -w capture.pcap）
- 联系 CDN 提供方反馈问题节点 IP，申请更新证书配置

## [workaround]
- curl 请求添加 -k 参数忽略证书验证（示例：curl -k <外部域名>）
- 配置客户端程序信任特定根证书链

## [Related Information]
- Environment: 3.18.1
- 443
- /etc/ssl/certs
- curl
- tcpdump
- openssl
- nuget.cdn.azure.cn
- Component: (待归类)
- Page ID: 320012901
- Original Title: 容器平台-pod内请求外部域名外网拉包出现tcp包超长-外部 CDN 节点证书链异常导致 TLS 验证失败-112915
