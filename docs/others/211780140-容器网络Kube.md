---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 容器网络（Kube

Pod 内执行 `nslookup kubernetes.default` 返回 SERVFAIL 跨节点 Pod 之间无法 ping 通（检查 ovs-vsctl show 显示端口未正常绑定） `ovs-ofctl dump-flows br-int` 显示缺少容器相关流表项

## Cause
- CoreDNS 服务异常或 kube-dns Service 的 endpoints 丢失
- NetworkPolicy 规则配置错误导致流量被丢弃
- ovn-controller 组件异常导致流表未下发

## Resolution
- 检查 CoreDNS 状态：`kubectl get pod -n kube-system -l k8s-app=kube-dns`
- 验证 NetworkPolicy 配置：`kubectl get networkpolicy -A`
- 重启 ovn-controller：`systemctl restart ovn-controller`

## [workaround]
- 临时配置 DNS：在 Pod 的 /etc/resolv.conf 中添加 8.8.8.8
- 手动添加路由：`ip route add 10.16.0.0/16 via <node-ip>`

## [Related Information]
- Environment: Kube-ovn-overlay 网络模式（默认 VXLAN 封装）
- CoreDNS
- NetworkPolicy
- ovn-controller
- kube-ovn-cni
- br-int 网桥
- /etc/cni/net.d/10-kube-ovn.conflist
- Component: (待归类)
- Page ID: 211780140
- Original Title: 容器网络（Kube-ovn-overlay）
