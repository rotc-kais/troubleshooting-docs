---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 跨节点不同模式无法通信

Pod 之间无法通信，ICMP 包能到达对端节点但无法到达目标 Pod iptables TRACE 显示包在 nat 表的 PREROUTING 链后丢失 正常通信场景中 ICMP 包应进入 mangle 表的 FORWARD 链

## Cause
- 节点 rp_filter 配置导致反向路径过滤丢弃数据包

## Resolution
- 在目标节点执行：sysctl -w net.ipv4.conf.all.rp_filter=0; sysctl -w net.ipv4.conf.eth0.rp_filter=0
- 在源节点执行：sysctl -w net.ipv4.conf.all.rp_filter=0; sysctl -w net.ipv4.conf.tunl0.rp_filter=0

## [workaround]

## [Related Information]
- Environment: Calico 网络跨节点 Pod 通信场景，混合使用 IPIP Always 和 Never 模式
- iptables nat PREROUTING 链
- iptables mangle FORWARD 链
- rp_filter
- IPIP 模式
- tunl0 接口
- eth0 接口
- Component: (待归类)
- Page ID: 115518698
- Original Title: 跨节点不同模式无法通信
