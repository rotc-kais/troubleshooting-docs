---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 故障排除

服务端证书过期后出现503错误 客户端日志报错 'x509: certificate has expired or is not yet valid' 监控显示TLS握手失败率突增

## Cause
- 证书文件未及时更新
- 自动续期流程失效（如ACME客户端配置错误）

## Resolution
- openssl x509 -enddate -noout -in /etc/ssl/certs/server.pem
- kubectl create secret tls new-cert --cert=./new.crt --key=./new.key -n prod
- 配置cert-manager的ClusterIssuer资源

## [workaround]
- 临时回退到未过期的旧证书
- 在测试环境关闭TLS验证（需修改ingress配置）

## [Related Information]
- Environment: Kubernetes 1.24集群使用cert-manager v1.8进行证书管理；开发环境使用自签名证书
- kube-apiserver
- ingress-nginx
- cert-manager
- /etc/kubernetes/pki/apiserver.crt
- 8443
- Component: (待归类)
- Page ID: 216106005
- Original Title: 故障排除-证书相关
