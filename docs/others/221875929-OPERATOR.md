---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# OPERATOR

Operator Pod处于CrashLoopBackOff状态 自定义资源状态持续显示Processing Operator日志显示'permission denied'错误

## Cause
- 缺少必要的RBAC权限配置
- 自定义资源处理逻辑存在无限循环
- 数据卷挂载路径配置为/var/data而非预期的/opt/app/data

## Resolution
- 应用RBAC配置：kubectl apply -f deploy/rbac.yaml
- 修复控制器reconcile逻辑：
while status != "COMPLETED" {
    // 添加错误处理逻辑
}
- 修正部署清单中的volumeMounts配置：
volumeMounts:
- name: data-volume
  mountPath: /opt/app/data

## [workaround]
- 手动删除卡住的自定义资源：kubectl delete <cr-kind> <cr-name>
- 临时扩大Operator Pod的权限：kubectl edit clusterrolebinding <binding-name>

## [Related Information]
- Environment: Kubernetes 1.20+ with operator-sdk 1.12.0
- rbac.authorization.k8s.io/v1
- CustomResourceDefinition
- PersistentVolumeClaim
- spec.template.spec.containers[0].volumeMounts
- WATCH_NAMESPACE
- Component: (待归类)
- Page ID: 221875929
- Original Title: OPERATOR
