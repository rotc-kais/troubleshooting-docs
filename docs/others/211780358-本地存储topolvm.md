---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 本地存储（topolvm）

PVC 处于 Pending 状态，事件显示 no capacity annotation 节点磁盘空间不足时 Pod 无法调度，报错 node(s) had untolerated taint {topolvm.cybozu.com/node: out-of-disk}

## Cause
- StorageClass 未正确配置 capacity 权重注解 topolvm.cybozu.com/capacity
- 节点磁盘使用量超过阈值但 Pod 未配置对应污点容忍

## Resolution
- 检查并设置 StorageClass 注解: kubectl annotate sc <storageclass-name> topolvm.cybozu.com/capacity=<true|false>
- 清理节点磁盘空间或扩容物理磁盘，检查 TopoLVM 的 --threshold=5 参数配置

## [workaround]
- 临时移除节点污点: kubectl taint nodes <node-name> topolvm.cybozu.com/node:out-of disk-

## [Related Information]
- Environment: TopoLVM 0.10.0+, Kubernetes 1.23+
- topolvm.cybozu.com/capacity
- topolvm.cybozu.com/node=out-of-disk
- --threshold
- StorageClass
- Component: (待归类)
- Page ID: 211780358
- Original Title: 本地存储（topolvm）
