---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 2023.4~2023.6

kubelet 服务每隔几小时重启，导致节点状态变为 NotReady 节点 /var/log/messages 中存在 OOMKilled 记录 kubelet 进程内存使用量周期性激增至 2GB 以上

## Cause
- kubelet 镜像垃圾回收（imageGC）机制存在内存泄漏，未正确清理未使用镜像导致内存累积

## Resolution
- 调整 kubelet 配置参数：--image-gc-high-threshold=85%，--image-gc-low-threshold=80%
- 设置 --eviction-hard=memory.available<500Mi
- 执行 systemctl restart kubelet 应用配置
- 增加节点内存监控告警规则

## [workaround]
- 手动执行镜像清理命令：docker image prune -a --filter "until=24h"

## [Related Information]
- Environment: Kubernetes v1.20.5 集群，Docker 19.03.15 运行时环境
- kubelet
- Docker
- imageGCHighThresholdPercent
- imageGCLowThresholdPercent
- eviction-hard
- Component: (待归类)
- Page ID: 140833386
- Original Title: 2023.4~2023.6
