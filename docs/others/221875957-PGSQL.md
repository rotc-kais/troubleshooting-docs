---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# PGSQL

数据库连接数达到max_connections限制 监控显示连接池耗尽

## Cause
- 连接池配置的max_connections值过低
- 存在连接泄漏（未正确释放空闲连接）

## Resolution
- ALTER SYSTEM SET max_connections = 200; (需重启生效)
- 检查pg_stat_activity排查闲置连接
- 配置连接池工具（如pgbouncer）进行连接复用

## [workaround]
- 临时调高max_connections参数值
- 重启数据库释放所有连接

## [Related Information]
- Environment: PostgreSQL 9.6+
- max_connections
- pg_stat_activity
- pgbouncer
- idle_in_transaction_session_timeout
- Component: (待归类)
- Page ID: 221875957
- Original Title: PGSQL
