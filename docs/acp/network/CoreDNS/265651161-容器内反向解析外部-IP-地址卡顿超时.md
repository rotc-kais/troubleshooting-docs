---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 容器内反向解析外部 IP 地址卡顿超时

业务 Pod 中通过 NodeLocal DNS 反向解析外部 IP 地址卡顿 节点上使用 TCP 协议反向解析外部 IP 出现卡顿

## Cause
- NodeLocal DNS 配置了 force_tcp 参数强制使用 TCP 协议
- 集群节点无法通过 TCP 协议进行外部解析(可能因外部 DNS 不支持 TCP 或防火墙限制)

## Resolution
- 修改 kube-system 命名空间下 nodelocal dns 的 ConfigMap，删除反向解析部分的 force_tcp 配置
- 重建 nodelocal dns 组件

## [workaround]

## [Related Information]
- Environment: 部署了 nodelocal dns 的 Kubernetes 生产集群
- nodelocal-dns
- coredns
- force_tcp
- TCP/53
- Component: CoreDNS
- Page ID: 265651161
- Original Title: 容器内反向解析外部 IP 地址卡顿超时
