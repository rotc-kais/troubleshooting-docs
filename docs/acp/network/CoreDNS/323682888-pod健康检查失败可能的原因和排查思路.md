---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# pod健康检查失败可能的原因和排查思路

Readiness Probe失败：Pod IP从Service负载均衡中摘除，流量不再转发至该Pod Liveness Probe失败：kubelet会杀死容器并尝试重启 Startup Probe失败：容器启动阶段未完成即触发重启

## Cause
- 应用程序启动缓慢
- 应用程序崩溃或死循环
- 探针路径/端口配置错误
- 探针参数不合理（timeoutSeconds/periodSeconds过短）
- 容器内网络故障
- DNS解析失败
- CPU/内存资源不足
- 依赖服务异常
- 端口冲突（hostNetwork场景）
- SYN backlog过小

## Resolution
- 查看应用日志：kubectl logs <pod> -c <container> -n<namespaces>
- 配置startupProbe替代调大initialDelaySeconds
- 进入容器手动测试探针路径/端口：curl http://localhost:<port>/<path>
- 调整timeoutSeconds（建议≥2秒）和periodSeconds（建议≥5秒）
- 测试容器内端口连通性：telnet 127.0.0.1 <port>
- 检查DNS配置：nslookup <service>
- 监控资源使用：kubectl top pod
- 调整resources.requests/limits
- 确保Readiness Probe独立于核心依赖
- 处理端口冲突或调整SYN backlog

## [workaround]

## [Related Information]
- Environment: Alauda Container Platform
- startupProbe
- readinessProbe
- livenessProbe
- /healthz/startup
- 8080
- kubectl describe pod
- kubectl exec
- kubelet
- timeoutSeconds
- periodSeconds
- failureThreshold
- Component: CoreDNS
- Page ID: 323682888
- Original Title: 容器平台-pod健康检查失败可能的原因和排查思路-113698
