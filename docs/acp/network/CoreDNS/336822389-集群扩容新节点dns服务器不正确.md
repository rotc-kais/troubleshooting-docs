---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 集群扩容新节点dns服务器不正确

新增节点的pod dns错误

## Cause
- kubeadm-config中serviceSubnet配置未更新，导致新增节点沿用历史遗留的dns配置

## Resolution
- 修改kubeadm-config的serviceSubnet为正确值: kubectl edit configmap -n kube-system kubeadm-config
- 修改问题节点/var/lib/kubelet/config.yaml的clusterDNS配置
- 重启问题节点kubelet并重建所有pod

## [workaround]

## [Related Information]
- Environment: 3.16.2
- /etc/kubernetes/manifests/kube-controller-manager.yaml
- /etc/kubernetes/manifests/kube-apiserver.yaml
- kubeadm-config
- service-cluster-ip-range
- serviceSubnet
- /var/lib/kubelet/config.yaml
- Component: CoreDNS
- Page ID: 336822389
- Original Title: 容器平台-网络-集群扩容新节点dns服务器不正确-116386
