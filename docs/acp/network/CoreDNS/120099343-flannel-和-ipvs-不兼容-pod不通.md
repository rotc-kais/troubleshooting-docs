---kind:   - Troubleshootingproducts:    - Alauda Container Platform   - Alauda DevOps   - Alauda AI   - Alauda Application Services   - Alauda Service Mesh   - Alauda Developer PortalProductsVersion:   - 4.1.0,4.2.x---<!-- A type of document that involves encountering a fault, diag...it, performing root cause analysis, and providing solutions. --># flannel 和 ipvs 不兼容, pod不通pod 到 dns svc 通信失败 抓包显示返回包 src_ip 未变（保持 pod_ip） dig 测试出现源IP非dns地址告警## Cause- 返回包未做 SNAT 导致路由问题- kube-proxy 默认未启用 masqueradeall## Resolution- 修改 kube-proxy 配置: --masquerade-all=true- 重启 kube-proxy 组件使配置生效## [workaround]## [Related Information]- Environment: Kubernetes 1.24.1, flannel CNI- kube-proxy- ipvs- flannel- conntrack- masqueradeall- Component: CoreDNS- Page ID: 120099343- Original Title: flannel 和 ipvs 不兼容, pod不通