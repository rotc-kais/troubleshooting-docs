---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# coredns解析域名时好时坏

pod内部解析域名时通时不通 ping命令出现Unknown host或bad address错误 持续ping域名出现间歇性失败

## Cause
- coredns默认采用random策略随机选择上游nameserver
- 当选中无法正确解析的nameserver时导致解析失败

## Resolution
- 修改Corefile配置：
        forward . /etc/resolv.conf {
          policy sequential
          prefer_udp
        }
- 将有效nameserver置于/etc/resolv.conf首位

## [workaround]

## [Related Information]
- Environment: 通用
- forward插件
- /etc/resolv.conf
- policy参数
- sequential策略
- random策略
- Component: CoreDNS
- Page ID: 98870513
- Original Title: coredns解析域名时好时坏
