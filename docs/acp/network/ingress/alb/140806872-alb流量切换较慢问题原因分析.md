---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# alb流量切换较慢问题原因分析

流量切换时间在19s-30s之间

## Cause
- 规则reload采用轮询机制，每次更新规则会多次请求api server
- 请求api server耗时13.9s
- reload时间由轮询间隔(默认5s)+查询k8s ep时间+nginx内部生效时间组成

## Resolution
- 升级到3.X版本(优化api server请求)
- 将etcd部署到SSD磁盘
- 增加api server资源

## [workaround]

## [Related Information]
- Environment: 2.6
- 轮询间隔
- k8s ep
- api server请求
- etcd部署
- nginx内部生效
- Component: alb
- Page ID: 140806872
- Original Title: alb流量切换较慢问题原因分析
