---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# ALB中access.log日志存在大量504内容说明

access.log中存在大量504状态码 请求因超时触发重试并转发到其他实例 数据重复插入

## Cause
- proxy_read_timeout配置为30秒，短于实际处理时间（如1分钟）
- 未限制proxy_next_upstream_tries导致多次重试

## Resolution
- 在ALB的CM配置中增加proxy_next_upstream_tries限制（如设置为5）
- 更新配置后重启ALB服务

## [workaround]

## [Related Information]
**Screenshots**
![](assets/rong-qi-ping-tai-albzhong-access-logri-zhi-cun-zai-da-liang-504nei-rong-shuo-min/image2022-11-11_10-42-23.png)
- Environment: 2.6
- proxy_next_upstream_tries
- proxy_read_timeout
- alb
- cm配置
- Component: alb
- Page ID: 130557052
- Original Title: 容器平台-ALB中access.log日志存在大量504内容说明
