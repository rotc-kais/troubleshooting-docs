---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 集群节点删除之后重新添加报错

添加节点时出现到22端口timeout报错 tke-platform-api到新加节点不通但master节点可SSH到新节点

## Cause
- kube-ovn-controller触发节点清理操作时未正确清理OVN资源

## Resolution
- pod=`kubectl -n kube-system get pod -l app=ovs -o name | head -n1 | awk '{ print $1}' | awk -F/ '{print$2}'`
- kubectl cp -n kube-system $pod:/kube-ovn/kubectl-ko ./kubectl-ko
- bash ./kubectl-ko nbctl lr-policy-list ovn-cluster | grep -w <NODE_IP>
- bash ./kubectl-ko nbctl lr-policy-del ovn-cluster 30000 "ip4.dst == xxx.xxx.xxx.xxx"
- 重新添加节点

## [workaround]

## [Related Information]
- Environment: 3
- 22端口
- kube-ovn-controller
- ovn-cluster
- kubectl-ko
- OVN逻辑路由器策略
- Component: kube-Ovn
- Page ID: 250446946
- Original Title: 基础架构-部署-集群节点删除之后重新添加报错
