---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 节点删除后无法重新加入集群

节点删除后无法重新加入集群 添加节点时报错连接22端口超时

## Cause
- kube-ovn-controller leader运行于被删除节点或未运行，未清理ovn lr policy route残留

## Resolution
- pod=`kubectl -n kube-system get pod -l app=ovs -o name | head -n1 | awk '{print $1}' | awk -F/ '{print $2}'`
- kubectl cp -n kube-system $pod:/kube-ovn/kubectl-ko ./kubectl-ko
- bash ./kubectl-ko nbctl lr-policy-list ovn-cluster | grep -w $NODE_IP
- bash ./kubectl-ko nbctl lr-policy-del ovn-cluster 30000 "ip4.dst == $NODE_IP"

## [workaround]

## [Related Information]
**Screenshots**
![](assets/jie-dian-shan-chu-hou-wu-fa-zhong-xin-jia-ru-ji-qun/image-2024-5-10_10-3-37.png)
![](assets/jie-dian-shan-chu-hou-wu-fa-zhong-xin-jia-ru-ji-qun/image-2024-5-10_10-8-28.png)
- Environment: Kubernetes版本: 未指定; CNI版本: Kube-OVN v1.12.x; ACP版本: v3.16.0
- kube-ovn-controller
- ovn lr policy route
- 22端口
- kubectl-ko
- Component: kube-Ovn
- Page ID: 207400537
- Original Title: 节点删除后无法重新加入集群
