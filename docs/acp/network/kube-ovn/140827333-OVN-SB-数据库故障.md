---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# OVN SB 数据库故障

ovn-controller 无法 claim port binding，导致 Pod 无法正常启动 断开与 SB 的连接并重连后恢复正常 leader 日志出现 'current entry eid ... does not match prerequisite ... in execute_command_request' 错误

## Cause
- 磁盘 IO 问题导致 OVN SB 数据库节点间日志同步延迟
- 节点 10.193.10.1 的日志索引落后于 leader 节点 5b60，引发 raft 协议日志不一致

## Resolution
- 确保磁盘 IO 正常后，重启故障节点 (如 10.193.10.1)

## [workaround]
- 断开并重新连接 SB 数据库

## [Related Information]
- Environment: Kube-OVN v1.8, OVS v2.15.3
- 端口 6644
- ovsdb-server-sb.log
- ovn-controller
- OVS
- raft 协议
- entry eid
- log_fsync
- Component: kube-Ovn
- Page ID: 140827333
- Original Title: OVN SB 数据库故障
