---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 单节点掉电故障后，域名解析恢复时间过长

域名解析恢复时间过长 coredns pod 恢复正常后仍存在数分钟解析故障

## Cause
- kube-ovn-controller 更新 svc annotations 失败导致 ovn lb 未正常更新

## Resolution
- 禁用 ovn lb
- 修改 kube-ovn 代码将更新 svc annotations 放到最后处理：https://github.com/kubeovn/kube-ovn/pull/4280

## [workaround]
- 临时禁用 ovn lb（条件允许情况下）

## [Related Information]
**Screenshots**
![](assets/dan-jie-dian-diao-dian-gu-zhang-hou-yu-ming-jie-xi-hui-fu-shi-jian-guo-chang/image-2024-7-15_15-22-52.png)
![](assets/dan-jie-dian-diao-dian-gu-zhang-hou-yu-ming-jie-xi-hui-fu-shi-jian-guo-chang/image-2024-7-15_15-23-7.png)
![](assets/dan-jie-dian-diao-dian-gu-zhang-hou-yu-ming-jie-xi-hui-fu-shi-jian-guo-chang/image-2024-7-15_15-23-46.png)
![](assets/dan-jie-dian-diao-dian-gu-zhang-hou-yu-ming-jie-xi-hui-fu-shi-jian-guo-chang/image-2024-7-15_15-24-0.png)
- kube-ovn-controller
- ovn lb
- svc annotations
- coredns
- Component: kube-ovn
- Page ID: 221873417
- Original Title: 单节点掉电故障后，域名解析恢复时间过长
