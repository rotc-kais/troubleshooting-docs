---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 中科宇航组播 UDP 丢包

client pod到server pod之间UDP丢包，ifconfig eth0显示丢包计数 交换机间流量因千兆堆叠线导致带宽瓶颈 组播报文被泛洪到未加入组播的pod节点

## Cause
- tcpdump使用udp过滤导致分片统计不准确，实际交换机丢分片
- 交换机堆叠线带宽不足（万兆流量经千兆堆叠线）
- 交换机组播转发表将端口标记为Router-port，可能由OVN的IGMP查询机制导致

## Resolution
- 取消tcpdump的udp过滤条件，正确统计分片
- 升级交换机堆叠线至万兆或配置LAG绑定
- 研究调整OVN与交换机的IGMP交互配置

## [workaround]
- 使用bond主备模式指定主网卡在交换机A上规避带宽问题

## [Related Information]
**Screenshots**
![](assets/zhong-ke-yu-hang-zu-bo-udp-diu-bao/image-2025-2-24_13-57-34.png)
![](assets/zhong-ke-yu-hang-zu-bo-udp-diu-bao/image-2025-2-24_13-26-48.png)
![](assets/zhong-ke-yu-hang-zu-bo-udp-diu-bao/image-2025-2-24_14-11-0.png)
![](assets/zhong-ke-yu-hang-zu-bo-udp-diu-bao/image-2025-2-24_13-41-30.png)
- Environment: Kube-OVN CNI环境，pod通过ovn路由器连接交换机，对比道客云直连节点网卡架构
- tcpdump -i xxx udp and host xxxx and port xxx
- netstat -s中的fragment dropped after timeout
- multicast_snoop
- igmp query
- ovn路由器
- 交换机堆叠线
- Component: kube-Ovn
- Page ID: 266895440
- Original Title: 中科宇航组播 UDP 丢包
