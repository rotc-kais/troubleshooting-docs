---kind:   - Troubleshootingproducts:    - Alauda Container Platform   - Alauda DevOps   - Alauda AI   - Alauda Application Services   - Alauda Service Mesh   - Alauda Developer PortalProductsVersion:   - 4.1.0,4.2.x---<!-- A type of document that involves encountering a fault, diag...it, performing root cause analysis, and providing solutions. --># ovsovs-vswitchd 内存缓慢增长，RSS 上下波动但总体上涨 ovs-vswitchd 日志重复出现：Kernel does not correctly support feature negotiation. Using standard features. valgrind 日志显示 dpif_netlink_open/ofpbuf_new 等函数存在内存泄漏## Cause- dpif_netlink 相关代码存在内存泄漏- ofpbuf_new 函数分配的内存未正确释放## Resolution- 构建 debug 镜像：make image-debug- 使用 valgrind 检测内存泄漏：/usr/share/openvswitch/scripts/ovs-ctl restart --no-ovsdb-server --system-id=random --no-mlockall --ovs-vswitchd-wrapper=valgrind- 分析 valgrind 日志定位泄漏点- 修复 ovs 代码内存泄漏问题并重新编译## [workaround]## [Related Information]- Environment: kylin v10 sp2, kernel 4.19.90-24.4.v2101.ky10.x86_64, Kube-OVN v1.9.17- ovs-vswitchd- Kube-OVN v1.9.17- valgrind- dpif_netlink_open- ofpbuf_new- nl_sock_transact- Component: Kubernetes- Page ID: 144902839- Original Title: ovs-vswitchd 内存泄露