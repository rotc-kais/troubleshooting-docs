---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# ovs

ovs-vswitch 占用大量 CPU（120%） ovn-controller 日志中存在大量重复的 acl policy 匹配记录 数据流流量波形与 CPU 使用率正相关

## Cause
- ACL 策略配置了 log 标记导致数据包记录
- 旧版本 networkpolicy 对 allow 规则开启了日志记录

## Resolution
- 拆除触发日志记录的 networkpolicy
- 升级 kube-ovn 版本

## [workaround]

## [Related Information]
- Environment: Kubernetes with OVN-Kubernetes CNI
- acl_log
- ovn_pinctrl0
- networkpolicy
- kube-ovn
- log 标记
- Component: kube-Ovn
- Page ID: 120115340
- Original Title: ovs-ovn cpu使用率飙升
