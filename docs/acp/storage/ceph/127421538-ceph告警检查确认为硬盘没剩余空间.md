---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# ceph告警检查确认为硬盘没剩余空间

ceph health 报告 HEALTH_WARN 或 HEALTH_ERR，例如：osd.2 is near full at 85% 或 osd.3 is full at 97% 客户端无法读写数据（当 OSD 使用率 ≥95% 时）

## Cause
- 测试小型集群时未保留足够磁盘空间
- 默认 mon_osd_full_ratio (0.95) 和 mon_osd_nearfull_ratio (0.85) 阈值触发

## Resolution
- 增加新 ceph-osd 扩展集群容量
- 删除已满 OSD 上的数据（需确保集群可读写时操作）

## [workaround]
- 临时调整全局阈值：ceph osd set-nearfull-ratio 0.97; ceph osd set-backfillfull-ratio 0.97; ceph osd set-full-ratio 0.97
- 单独调整已满 OSD 的阈值或调低其 crush weight

## [Related Information]
- Environment: 通用
- mon_osd_full_ratio
- mon_osd_nearfull_ratio
- osd
- ceph-osd
- crush weight
- set-nearfull-ratio
- set-backfillfull-ratio
- set-full-ratio
- Component: Ceph
- Page ID: 127421538
- Original Title: ceph告警检查确认为硬盘没剩余空间
