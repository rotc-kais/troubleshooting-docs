---kind:   - Troubleshootingproducts:    - Alauda Container Platform   - Alauda DevOps   - Alauda AI   - Alauda Application Services   - Alauda Service Mesh   - Alauda Developer PortalProductsVersion:   - 4.1.0,4.2.x---<!-- A type of document that involves encountering a fault, diag...it, performing root cause analysis, and providing solutions. --># Underlay 模式下节点重启后网络不通## 关联JIRA 无## Cause## Resolution- Underlay 模式下，节点重启后有概率网络不通。- ## 排查步骤- Underlay 模式下， Kube-OVN 会将用户配置的节点网卡加入OVS网桥。如果节点网卡上配置了IP和路由，这些IP和路由会在网卡加入OVS网桥后失效。为了解决这个问题，Kube-OVN 在 kube-ovn-cni 中添加了相应的处理逻辑，负责将节点网卡上的 IP 和路由转移到 OVS 网桥（如 br-pro- 检查节点网卡上的 IP 和路由是否已经正确转移到 OVS 网桥上。- ## 解决方法- Kube-OVN新版本已经修复此bug，修复方法为：修改ovs-ovn 的启动脚本，在ovs-ovn启动过程中，如果节点网卡上存在IP和路由，就将其转移至OVS网桥上。- kubectl -n kube-system create configmap kube-ovn-scripts --from-file=kube-ovn-scripts- (2) 修改 kube-system下的ovs-ovn daemonset，分别添加 volume 和 volumeMounts。- (3) 重建 kube-system 下的 ovs-ovn Pod。## [workaround]## [Related Information]- 0755- /kube-ovn/start-ovs.sh- Pod- Component: Kubelet- Page ID: 112055822- Original Title: Underlay 模式下节点重启后网络不通