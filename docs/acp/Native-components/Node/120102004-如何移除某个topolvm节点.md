---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 如何移除某个topolvm节点

节点故障 残留部署或配置信息存在 节点无法从topolvm集群移除

## Cause
- topolvmcluster配置中保留故障节点信息
- 残留configmap/deployment未清理
- 节点存在finalizer阻止删除

## Resolution
- 编辑topolvmcluster资源删除对应节点classes配置: kubectl edit topolvmcluster -n nativestor-system topolvm
- 删除configmap: kubectl delete cm -n nativestor-system lvmdconfig-<node-ip>
- 删除deployment: kubectl delete deploy -n nativestor-system topolvm-node-<node-ip>
- 清理节点finalizer: kubectl edit node <nodeip> 删除topolvm.cybozu.com/node字段

## [workaround]

## [Related Information]
- Environment: 3.8.1
- topolvmcluster
- lvmdconfig-<node-ip>
- topolvm-node-<node-ip>
- finalizers
- /dev/vdg
- nativestor-system
- Component: Node
- Page ID: 120102004
- Original Title: 如何移除某个topolvm节点
