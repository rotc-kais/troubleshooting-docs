---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# kubervirt创建的虚机重启后无法启动

虚机对应的pod一直terminating 新起来的pod报错磁盘被占用

## Cause
- 磁盘设备映射残留（device mapper未释放）

## Resolution
- kubectl -n daybuild-cluster-a get vmi | grep Failed
- kubectl -n daybuild-cluster-a get po virt-launcher-p2230-auto-dep-r-3-4dc-wgxdn -o yaml | grep claimName | grep -v rtfs
- kubectl -n daybuild-cluster-a get pvc p2230-auto-dep-r-3-4dc-vdb
- losetup -a | grep pvc-ad0fdc6a-cec8-4234-af81-91ff0dd457f1
- lsblk /dev/loop16
- dmsetup remove /dev/mapper/ceph--13b80c41--938f--4bb6--9ae9--99f36a4ff81b-osd--data--092d5956--42a5--4957--858a--18666837dcba

## [workaround]
- 强制删除pod后执行设备清理操作

## [Related Information]
- Environment: kubevirt + TKE容器平台
- virt-launcher-pod
- pvc
- pv
- losetup
- dmsetup
- /dev/mapper
- Component: Node
- Page ID: 115517885
- Original Title: 容器平台-kubervirt创建的虚机重启后无法启动
