---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# pod数量150多个，但是子网显示已用ip 6千多

pod数量（150+）与子网已用ip数量（6k+）不匹配 已删除pod的ip记录仍存在于subnets中 审计日志中存在cni相关操作记录

## Cause
- cni组件未正确释放已删除pod的ip
- 控制器可能存在lsp(逻辑交换机端口)操作异常
- 审计日志显示cni操作可能导致ip残留

## Resolution
- 执行自动清理ips的维护脚本
- 提交代码PR修复控制器逻辑

## [workaround]

## [Related Information]
**Screenshots**
![](https://jira.alauda.cn/secure/attachment/128361/128361_image-2022-11-17-14-34-06-435.png)
![](https://jira.alauda.cn/secure/attachment/128360/128360_image-2022-11-17-14-34-10-588.png)
![](https://jira.alauda.cn/secure/attachment/128359/128359_image-2022-11-17-14-34-14-730.png)
![](https://jira.alauda.cn/secure/attachment/128363/128363_image-2022-11-17-15-07-13-424.png)
![](https://jira.alauda.cn/secure/attachment/128365/128365_image-2022-11-17-15-11-33-236.png)
![](https://jira.alauda.cn/secure/attachment/128366/128366_image-2022-11-17-15-12-06-973.png)
- Environment: CNI 版本：1.9.14
- subnet管理
- ovn-controller
- cni配置
- Component: Kubernetes
- Page ID: 130564344
- Original Title: pod数量150多个，但是子网显示已用ip 6千多
