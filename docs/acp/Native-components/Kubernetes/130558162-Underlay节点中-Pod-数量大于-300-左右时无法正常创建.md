---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 【Underlay】节点中 Pod 数量大于 300 左右时无法正常创建

少数Pod检查网关失败，出现io timeout错误 kube-ovn-daemon打开文件数持续高企 ovs-vswitchd日志出现'over 4096 resubmit actions'警告

## Cause
- 节点Pod数量超过300时，ARP广播包触发OVS流表resubmit次数超过4096限制
- OVN默认流表设计导致广播包需遍历所有LSP端口
- 高密度Pod场景下_MC_flood组引发级联resubmit操作

## Resolution
- 修改OVN流表优先级：table=22(ls_in_l2_lkup)添加priority=90规则匹配arp.op==1 && eth.bcast
- 调整流表处理逻辑使ARP广播直接转发至localnet端口
- 更新Kube-OVN代码实现流表优化(PR#2038)

## [workaround]

## [Related Information]
- ovs-vswitchd
- kube-ovn-daemon
- br-int
- Multicast_Group/_MC_flood
- ls_in_l2_lkup流表
- MAX_RESUBMITS(4096)
- Component: Kubernetes
- Page ID: 130558162
- Original Title: 【Underlay】节点中 Pod 数量大于 300 左右时无法正常创建
