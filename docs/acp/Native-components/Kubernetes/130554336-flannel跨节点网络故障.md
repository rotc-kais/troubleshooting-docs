---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 【flannel】跨节点网络故障

跨节点网络故障，节点/Pod 无法 ping 通其它节点的 Pod flannel.1 接口 IP 跨节点互 ping 不通 抓包显示 VXLAN 封装包到达目标物理网卡但未到达 flannel.1 接口

## Cause
- systemd 242+ 版本自动为未分配 MAC 地址的虚拟设备分配地址，导致覆盖 flannel.1 接口的固定 MAC 地址

## Resolution
- 创建文件 /etc/systemd/network/50-flannel.link 并重启系统，内容为:
[Match]
OriginalName=flannel*
[Link]
MACAddressPolicy=none

## [workaround]

## [Related Information]
- Environment: Kylin Linux Advanced Server 10 (4.19.90-17.ky10.aarch64), Kubernetes with flannel v14.0, systemd-243-17.se.1.ky10.aarch64
- flannel.1 接口
- VXLAN
- systemd-networkd
- /etc/systemd/network/50-flannel.link
- Component: Kubernetes
- Page ID: 130554336
- Original Title: 【flannel】跨节点网络故障
