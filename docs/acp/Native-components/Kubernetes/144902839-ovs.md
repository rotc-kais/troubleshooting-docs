---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# ovs

ovs-vswitchd 内存缓慢增长，RSS 上下波动但总体上涨，无 Pod 活动时仍存在

## Cause
- 代码中 dpif_netlink_open 等函数调用导致内存未释放（valgrind 日志显示 ofpbuf_new 分配的内存块未释放）

## Resolution
- 修复 ovs 内存泄露代码，重新编译 debug 镜像并部署

## [workaround]

## [Related Information]
- Environment: 操作系统: kylin v10 sp2; 内核: 4.19.90-24.4.v2101.ky10.x86_64; CNI版本: Kube-OVN v1.9.17
- ovs-vswitchd
- dpif_netlink
- valgrind
- ofpbuf_new
- --ovs-vswitchd-wrapper=valgrind
- Component: Kubernetes
- Page ID: 144902839
- Original Title: ovs-vswitchd 内存泄露
