---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 物理机 curl 不稳定时通时不通

特定物理机 node 上的 pod 访问 apiservr 时不稳定 容器内 eth0 与 master ovn0 端口数据包对不上 容器内大量 ACK 重传但主机未收到

## Cause
- 网卡修改了数据包头中的协议类型字段
- geneve 封装路径异常

## Resolution
- 升级网卡驱动
- 执行命令关闭发送端 checksum offload：ethtool -K eth0 tx off

## [workaround]

## [Related Information]
**Screenshots**
![](assets/wu-li-ji-curl-bu-wen-ding-shi-tong-shi-bu-tong/image2022-12-12_14-32-53.png)
![image-2022-12-08-16-09-41-206.png](https://jira.alauda.cn/secure/attachment/130427/image-2022-12-08-16-09-41-206.png)
![image-2022-12-08-16-11-34-139.png](https://jira.alauda.cn/secure/attachment/130428/image-2022-12-08-16-11-34-139.png)
![image-2022-12-08-16-12-45-474.png](https://jira.alauda.cn/secure/attachment/130430/image-2022-12-08-16-12-45-474.png)
![image-2022-12-08-16-15-10-742.png](https://jira.alauda.cn/secure/attachment/130431/image-2022-12-08-16-15-10-742.png)
![image-2022-12-08-16-18-33-007.png](https://jira.alauda.cn/secure/attachment/130432/image-2022-12-08-16-18-33-007.png)
![image-2022-12-08-16-20-47-854.png](https://jira.alauda.cn/secure/attachment/130433/image-2022-12-08-16-20-47-854.png)
![image-2022-12-08-16-22-24-910.png](https://jira.alauda.cn/secure/attachment/130434/image-2022-12-08-16-22-24-910.png)
ethtool -K eth0 tx off           ![](assets/wu-li-ji-curl-bu-wen-ding-shi-tong-shi-bu-tong/image2022-12-12_14-34-12.png)
- Environment: 操作系统：arm | CNI 版本：1.9 | 网卡类型：华为 HNS
- geneve
- eth0
- ovn0
- HNS 网卡
- checksum offload
- Component: Kubernetes
- Page ID: 133077570
- Original Title: 物理机 curl 不稳定时通时不通
