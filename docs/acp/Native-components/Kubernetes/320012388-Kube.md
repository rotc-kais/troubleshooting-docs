---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# Kube

Pod 在滚动更新过程中启动缓慢 新 Pod 获取 IP 的等待时间较长

## Cause
- IP 分配重试机制导致等待时间指数增长
- ReplicaSet 控制器重试间隔指数增长
- 旧 Pod 退出缓慢延迟 IP 释放
- 命名空间资源配额耗尽影响调度

## Resolution
- 预先分配略多于副本数的固定 IP
- 优化 preStop 钩子和 terminationGracePeriodSeconds 配置
- 了解 Kube-OVN 的指数退避重试机制（1ms → 2ms → 4ms...）
- 采用动态 IP 分配策略
- 合理设置命名空间资源配额

## [workaround]

## [Related Information]
- Environment: 平台版本 3.12.4 | CNI 类型 Kube-OVN
- Kube-OVN
- Deployment
- ReplicaSet
- 固定 IP 策略
- preStop
- terminationGracePeriodSeconds
- 资源配额
- Component: Kubernetes
- Page ID: 320012388
- Original Title: 容器平台-网络-Kube-OVN-Deployment 固定 IP 下 Pod 滚动更新启动缓慢问题说明-113110
