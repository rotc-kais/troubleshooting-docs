---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 基础设施

服务自动重启 k8s集群master节点处于notready状态 master节点CPU使用率高达100%

## Cause
- tke服务组件sentry因prometheus监控告警指标过多，同步状态时调用apiserver占用过多资源

## Resolution
- 执行清理命令：kubectl get rels.operator.alauda.io -n cpaas - system | awk 'NR>1{print $1}' | head -n -5 | xargs kubectl delete rels.operator.alauda.io -n cpaas - system
- 检查apprealease资源状态：kubectl get apprealease -n <namespace> -o wide
- 持续观察master节点CPU使用情况
- 升级TKE版本至3.0.4

## [workaround]

## [Related Information]
- Environment: 2.9
- rels.operator.alauda.io
- apprealease
- cpaas-system命名空间
- sentry组件
- prometheus监控指标
- Component: Kube-APIServer
- Page ID: 94885745
- Original Title: 基础设施-集群-rels.operator.alauda.io 资源引起的集群master节点cpu升高问题解决
