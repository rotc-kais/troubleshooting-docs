---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# nfs连接失败

所有环境的两个NFS服务都连接不上

## Cause
- NFS-server到集群节点网络不通
- Kubernetes v1.20+默认metadata.selfLink字段被移除
- 未通NFS-server情况下创建了NFS存储类

## Resolution
- 配置kube-apiserver启动参数增加--feature-gates=RemoveSelfLink=false
- 修改/etc/kubernetes/manifests/kube-apiserver.yaml并重启kube-apiserver容器
- 重新创建正确关联NFS服务器的NFS存储类(NFS-SC)
- 修复NFS-server到集群节点的网络连接

## [workaround]

## [Related Information]
- Environment: 3.10.1
- kube-apiserver
- nfs-client-provisioner
- NFS存储类(NFS-SC)
- nfs-csi
- /etc/kubernetes/manifests/kube-apiserver.yaml
- Component: Kube-APIServer
- Page ID: 198255735
- Original Title: 容器平台-存储-nfs存储-nfs连接失败-74109
