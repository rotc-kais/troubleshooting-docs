---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# tke

tke-platform-api service 从节点访问不通 ipvs 规则未创建 kube-proxy的configmap中mode为空

## Cause
- kubeadm 1.30.0 的bug导致kube-proxy配置被还原为默认

## Resolution
- 临时将mode改为ipvs
- 重启kube-proxy

## [workaround]

## [Related Information]
**Screenshots**
![](assets/tke-platform-apide-service-cong-jie-dian-fang-wen-bu-tong-dan-ke-yi-zhi-jie-shi/image-2024-7-4_13-44-5.png)
- Environment: CNI版本从acp 3.16升级到acp 3.18，kubeadm 1.30.0
- kube-proxy
- ipvsadm
- kubeadm
- configmap
- mode配置项
- Component: Kube-Proxy
- Page ID: 219089983
- Original Title: tke-platform-api的service 从节点访问不通，但可以直接使用pod ip访问
