---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 在非正常关机后 Service IP 访问异常

TCP 模式的 Service IP 访问异常 conntrack 表中的 TCP 连接处于 ESTABLISH 状态无法关闭 错误的 Real Server 无法清理

## Cause
- 非正常关机导致 TCP 连接非正常中断
- kube-proxy 的优雅删除策略依赖连接数归零

## Resolution
- 使用命令 `ipvsadm -d -t {service-address} -r {server-address}` 删除错误的 Real Server

## [workaround]

## [Related Information]
- Environment: all
- IPVS
- kube-proxy
- conntrack
- 32745
- 443
- 8080
- 6443
- ipvsadm
- Component: Kube-Proxy
- Page ID: 201464242
- Original Title: 在非正常关机后 Service IP 访问异常
