---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 容器平台（ACP）

topolvm移除节点后仍存在job资源 流水线git clone未配置浅克隆导致克隆时间长 ALB未透传真实客户端IP

## Cause

## Resolution
- 手动清理残留的topolvm-prepare-vg job资源
- 在git clone命令中增加--depth参数（例如：git clone --depth 1）
- 检查四层协议需配置proxy protocol，七层协议需检查X-Forwarded-For头配置
- 通过etcd备份文件检索被删除的ALB规则并还原
- 通过sysctl调整net.core.somaxconn参数（例如：sysctl -w net.core.somaxconn=32768）

## [workaround]

## [Related Information]
- Environment: 容器平台（ACP）
- topolvm-prepare-vg
- git clone/depth参数
- X-Forwarded-For头/proxy protocol
- etcd备份文件
- net.core.somaxconn
- Component: ETCD
- Page ID: 211779900
- Original Title: 容器平台（ACP）
