---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 容灾环境同步异常

主备集群资源不同步 etcd-mirror pod 频繁重启 etcd-mirror容器日志报错：mvcc: required revision has been compacted

## Cause
- etcd自动压缩机制导致历史数据被清理

## Resolution
- 修改主集群所有master节点的/etc/kubernetes/manifests/etcd.yaml配置
- 将auto-compaction-mode参数值改为periodic
- 将auto-compaction-retention参数值改为2h

## [workaround]

## [Related Information]
- Environment: 3.4.x--3.8.x
- etcd-mirror
- etcd.yaml
- auto-compaction-mode
- auto-compaction-retention
- Component: ETCD
- Page ID: 115515552
- Original Title: 容灾环境同步异常
