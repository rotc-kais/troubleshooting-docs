---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 故障排除

流水线任务长时间处于Pending状态 构建容器失败并出现ImagePullBackOff错误 部署阶段超时，日志显示connection refused

## Cause
- Kubernetes集群资源（CPU/Memory）不足
- 私有镜像仓库认证失败
- 目标服务的端口未正确暴露

## Resolution
- 执行kubectl scale deployment/<deployment-name> --replicas=0 && kubectl scale deployment/<deployment-name> --replicas=1进行滚动重启
- 在Pod模板中添加imagePullSecrets配置：
spec:
  imagePullSecrets:
    - name: regcred
- 检查Service资源配置确保targetPort与容器暴露端口一致

## [workaround]
- 在流水线配置中增加资源预检步骤：kubectl describe node | grep Allocatable
- 部署前通过nc -zv <service-ip> <port>验证端口连通性

## [Related Information]
- Environment: Kubernetes 1.18+, Docker 20.10+
- Kubernetes集群
- 私有镜像仓库
- Service资源
- resources
- imagePullSecrets
- targetPort
- nodePort
- Component: 流水线
- Page ID: 219088289
- Original Title: 故障排除-流水线
