---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 故障排除

构建卡在「正在上传制品」阶段 日志出现「Failed to upload artifact: connection reset by peer」 构建日志末尾出现「ERROR: context deadline exceeded」

## Cause
- 网络不稳定导致上传中断
- 存储服务(MinIO/S3)配置错误
- 构建容器资源不足(CPU/内存)

## Resolution
- 检查网络连接：ping <storage_endpoint> && traceroute <storage_endpoint>
- 验证存储配置：kubectl get cm build-config -o jsonpath='{.data.storage}'
- 调整资源限制：kubectl edit deploy/build-worker (增加cpu: 2, memory: 4Gi)
- 配置超时：在config.yaml添加 upload_timeout: 1800s

## [workaround]
- 手动上传制品：aws s3 cp output.tar.gz s3://bucket/path/ || curl -X PUT -T output.tar.gz https://storage-endpoint

## [Related Information]
- Environment: Kubernetes 1.22+, Docker 20.10.7, 持续构建服务v3.2.1
- build-container
- minio
- s3-storage
- kubernetes-pod
- context deadline exceeded
- Component: 持续构建
- Page ID: 219088292
- Original Title: 故障排除-持续构建
