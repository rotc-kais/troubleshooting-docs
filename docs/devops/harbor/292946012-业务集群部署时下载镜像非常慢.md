---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 业务集群部署时，下载镜像非常慢

容器镜像拉取操作耗时明显超出正常范围 镜像下载请求优先尝试80端口导致连接超时 80端口超时后自动切换到443端口建立连接

## Cause
- 容器运行时默认配置了先尝试80端口再切换443端口的连接顺序

## Resolution
- 修改容器运行时配置强制指定使用443端口
- 在/etc/docker/daemon.json中添加"registry-mirrors"配置（Docker环境）
- 修改/etc/containerd/config.toml中的registry配置（containerd环境）

## [workaround]

## [Related Information]
**Screenshots**
![](assets/ji-chu-jia-gou-ye-wu-ji-qun-bu-shu-shi-xia-zai-jing-xiang-fei-chang-man-108739-z/mceclip2_1747820327933_sgj8c.png)
- Environment: v4.0.1
- 80/tcp
- 443/tcp
- /etc/docker/daemon.json
- /etc/containerd/config.toml
- registry-mirrors
- registry配置
- Component: Harbor
- Page ID: 292946012
- Original Title: 基础架构-业务集群部署时，下载镜像非常慢-108739-zh
