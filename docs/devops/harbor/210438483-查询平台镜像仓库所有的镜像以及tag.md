---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# 查询平台镜像仓库所有的镜像以及tag

JIRA Jira：

## Cause

## Resolution
- 使用脚本遍历镜像仓库所有镜像及tag：

USER='xxxx'
PASS='xxxx'
EDNPOINT=https://0.0.0.0:11443

for i in $(curl -k -u $USER:$PASS $EDNPOINT/v2/_catalog?n=5000 2>/dev/null | sed -e 's/^.*\[//' -e 's/\].*$//' -e 's/,/\n/g' -e s'/"//g'); do for j in $(curl  -k -u $USER:$PASS $EDNPOINT/v2/$i/tags/list 2>/dev/null | jq ".tags|keys" | sed -e '1d' -e '$d' -e 's/,//g') ; do echo $i:$(curl -k -u $USER:$PASS $EDNPOINT/v2/$i/tags/list 2>/dev/null |jq ".tags[$j]" | sed 's/"//g') ; done ; done

## [workaround]

## [Related Information]
- Environment: 3.10.x及以后
- /v2/_catalog
- /v2/$i/tags/list
- /etc/kubernetes/registry/auth.yaml
- curl
- jq
- Component: Harbor
- Page ID: 210438483
- Original Title: 查询平台镜像仓库所有的镜像以及tag
