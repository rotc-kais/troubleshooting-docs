---
kind:
  - Troubleshooting
products:
  - Alauda Container Platform
  - Alauda DevOps
  - Alauda AI
  - Alauda Application Services
  - Alauda Service Mesh
  - Alauda Developer Portal
ProductsVersion:
  - 4.1.0,4.2.x
---
<!-- A type of document that involves encountering a fault, diagnosing it, performing root cause analysis, and providing solutions. -->

# sonar 打开 SSO 问题

通过dex登录跳转到内网平台访问地址，导致客户端访问失败

## Cause
- 平台部署使用内网IP地址
- SSO默认跳转地址未适配外网映射域名

## Resolution
- 设置平台访问地址为域名模式并配置合法域名证书
- 更新sonar所在集群cluster资源的annotation: cpaas.io/platform-url设置为公网地址
- 手动重启sonar相关服务pod

## [workaround]

## [Related Information]
- Environment: 版本3.10.2 | 内网IP部署+外网域名映射
- cpaas.io/platform-url
- sonar
- dex
- harbor SSO配置
- Component: harbor
- Page ID: 140813695
- Original Title: sonar 打开 SSO 问题 - 通过 dex 登录跳转到内网平台访问地址，导致平台访问失败
